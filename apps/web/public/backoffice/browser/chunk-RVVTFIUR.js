import{d as F}from"./chunk-4HBIKYOG.js";import{Bb as S,Da as _,Fb as M,Ga as c,Gb as E,Nb as w,Qb as D,Sb as A,Ta as p,Tb as k,Ua as e,Ub as I,Va as t,Vb as R,Wa as u,Ya as h,Za as x,_a as v,bb as n,cb as d,db as s,fb as y,gb as O,hb as P,ib as m,jb as g,ta as o,xa as C}from"./chunk-PQRQHPXD.js";function z(l,i){if(l&1&&u(0,"div",42),l&2){let a=i.$implicit,r=x();v("height",a/r.maxRevenue*100,"%")}}function B(l,i){if(l&1&&(e(0,"span"),n(1),t()),l&2){let a=i.$implicit;o(),d(a)}}function L(l,i){if(l&1&&u(0,"div",42),l&2){let a=i.$implicit,r=x();v("height",a/r.maxOrders*100,"%")}}function N(l,i){if(l&1&&(e(0,"span"),n(1),t()),l&2){let a=i.$implicit;o(),d(a)}}function j(l,i){if(l&1&&u(0,"div",54),l&2){let a=i.$implicit,r=x().$implicit;v("height",a/r.maxWeeklySales*100,"%")}}function V(l,i){if(l&1&&(e(0,"div",43)(1,"div",44),n(2),t(),e(3,"div",45)(4,"div",46),n(5),t(),e(6,"div",47),n(7),t()(),e(8,"div",48)(9,"div",49),n(10),t(),e(11,"div",50),n(12),m(13,"number"),t()(),e(14,"div",51)(15,"div",52),c(16,j,1,2,"div",53),t()()()),l&2){let a=i.$implicit,r=i.index;o(2),d(r+1),o(3),d(a.name),o(2),d(a.brand),o(3),s("",a.sales," sold"),o(2),s("\u20AB",g(13,6,a.revenue)),o(4),p("ngForOf",a.weeklySales)}}function $(l,i){if(l&1&&(e(0,"div",55)(1,"div",56)(2,"div",57),n(3),t(),e(4,"div",58),n(5),t()(),e(6,"div",59),n(7),m(8,"number"),t(),e(9,"div",60)(10,"div",61),u(11,"div",62),t()()()),l&2){let a=i.$implicit,r=x();o(3),d(a.name),o(2),s("",a.orders," orders"),o(2),s("\u20AB",g(8,5,a.revenue)),o(4),v("width",a.revenue/r.maxRegionRevenue*100,"%")}}var T=class l{constructor(i){this.apiService=i}selectedPeriod="30d";loading=!1;error=null;totalRevenue=0;totalOrders=0;newCustomers=0;productsSold=0;revenueChange=0;ordersChange=0;customersChange=0;productsChange=0;revenueData=[];ordersData=[];chartLabels=[];get maxRevenue(){return this.revenueData.length>0?Math.max(...this.revenueData):0}get maxOrders(){return this.ordersData.length>0?Math.max(...this.ordersData):0}topProducts=[];totalCustomers=0;returningCustomers=0;averageOrderValue=0;topRegions=[];get maxRegionRevenue(){return this.topRegions.length>0?Math.max(...this.topRegions.map(i=>i.revenue)):0}ngOnInit(){this.loadAnalyticsData()}loadAnalyticsData(){this.loading=!0,this.error=null,this.apiService.getDashboardAnalytics().subscribe({next:i=>{this.totalRevenue=i.totalRevenue||0,this.totalOrders=i.totalOrders||0,this.newCustomers=i.newCustomers||0,this.productsSold=i.productsSold||0,this.revenueChange=i.revenueChange||0,this.ordersChange=i.ordersChange||0,this.customersChange=i.customersChange||0,this.productsChange=i.productsChange||0,this.loading=!1},error:i=>{console.error("Error loading analytics data:",i),this.error="Failed to load analytics data",this.loading=!1}}),this.apiService.getAnalyticsChartData(this.selectedPeriod).subscribe({next:i=>{this.revenueData=i.revenueData||[],this.ordersData=i.ordersData||[],this.chartLabels=i.labels||[]},error:i=>{console.error("Error loading chart data:",i)}}),this.apiService.getTopProducts(3).subscribe({next:i=>{this.topProducts=i.map(a=>({name:a.name,brand:a.brand,sales:a.totalSales||0,revenue:a.totalRevenue||0,weeklySales:a.weeklySales||[],maxWeeklySales:a.weeklySales?Math.max(...a.weeklySales):0}))},error:i=>{console.error("Error loading top products:",i)}}),this.apiService.getRegionalAnalytics().subscribe({next:i=>{this.topRegions=i.regions||[]},error:i=>{console.error("Error loading regional data:",i)}})}updateAnalytics(){console.log("Update analytics for period:",this.selectedPeriod)}viewAllProducts(){console.log("View all products clicked")}exportReport(){console.log("Export report clicked")}static \u0275fac=function(a){return new(a||l)(C(F))};static \u0275cmp=_({type:l,selectors:[["app-analytics"]],decls:143,vars:29,consts:[[1,"analytics-page"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],[1,"period-select",3,"ngModelChange","change","ngModel"],["value","7d"],["value","30d"],["value","90d"],["value","1y"],[1,"btn","btn-outline",3,"click"],[1,"metrics-grid"],[1,"metric-card"],[1,"metric-icon"],[1,"metric-content"],[1,"metric-value"],[1,"metric-change","positive"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-header"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color",2,"background","#3b82f6"],[1,"chart-container"],[1,"chart-bars"],["class","bar",3,"height",4,"ngFor","ngForOf"],[1,"chart-labels"],[4,"ngFor","ngForOf"],[1,"legend-color",2,"background","#10b981"],[1,"top-products"],[1,"section-header"],[1,"products-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"customer-analytics"],[1,"customer-stats"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"geographic-analytics"],[1,"geo-stats"],["class","geo-item",4,"ngFor","ngForOf"],[1,"bar"],[1,"product-item"],[1,"product-rank"],[1,"product-info"],[1,"product-name"],[1,"product-brand"],[1,"product-metrics"],[1,"product-sales"],[1,"product-revenue"],[1,"product-chart"],[1,"mini-chart"],["class","mini-bar",3,"height",4,"ngFor","ngForOf"],[1,"mini-bar"],[1,"geo-item"],[1,"region-info"],[1,"region-name"],[1,"region-orders"],[1,"region-revenue"],[1,"region-chart"],[1,"progress-bar"],[1,"progress-fill"]],template:function(a,r){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),n(4,"Analytics & Reports"),t(),e(5,"p"),n(6,"Comprehensive business insights and performance metrics"),t()(),e(7,"div",3)(8,"select",4),P("ngModelChange",function(b){return O(r.selectedPeriod,b)||(r.selectedPeriod=b),b}),h("change",function(){return r.updateAnalytics()}),e(9,"option",5),n(10,"Last 7 days"),t(),e(11,"option",6),n(12,"Last 30 days"),t(),e(13,"option",7),n(14,"Last 90 days"),t(),e(15,"option",8),n(16,"Last year"),t()(),e(17,"button",9),h("click",function(){return r.exportReport()}),n(18," \u{1F4CA} Export Report "),t()()(),e(19,"div",10)(20,"div",11)(21,"div",12),n(22,"\u{1F4B0}"),t(),e(23,"div",13)(24,"h3"),n(25,"Total Revenue"),t(),e(26,"div",14),n(27),m(28,"number"),t(),e(29,"div",15),n(30),t()()(),e(31,"div",11)(32,"div",12),n(33,"\u{1F6D2}"),t(),e(34,"div",13)(35,"h3"),n(36,"Total Orders"),t(),e(37,"div",14),n(38),m(39,"number"),t(),e(40,"div",15),n(41),t()()(),e(42,"div",11)(43,"div",12),n(44,"\u{1F465}"),t(),e(45,"div",13)(46,"h3"),n(47,"New Customers"),t(),e(48,"div",14),n(49),m(50,"number"),t(),e(51,"div",15),n(52),t()()(),e(53,"div",11)(54,"div",12),n(55,"\u{1F4E6}"),t(),e(56,"div",13)(57,"h3"),n(58,"Products Sold"),t(),e(59,"div",14),n(60),m(61,"number"),t(),e(62,"div",15),n(63),t()()()(),e(64,"div",16)(65,"div",17)(66,"div",18)(67,"h3"),n(68,"Revenue Trend"),t(),e(69,"div",19)(70,"span",20),u(71,"span",21),n(72," Revenue "),t()()(),e(73,"div",22)(74,"div",23),c(75,z,1,2,"div",24),t(),e(76,"div",25),c(77,B,2,1,"span",26),t()()(),e(78,"div",17)(79,"div",18)(80,"h3"),n(81,"Orders Trend"),t(),e(82,"div",19)(83,"span",20),u(84,"span",27),n(85," Orders "),t()()(),e(86,"div",22)(87,"div",23),c(88,L,1,2,"div",24),t(),e(89,"div",25),c(90,N,2,1,"span",26),t()()()(),e(91,"div",28)(92,"div",29)(93,"h3"),n(94,"Top Selling Products"),t(),e(95,"button",9),h("click",function(){return r.viewAllProducts()}),n(96,"View All"),t()(),e(97,"div",30),c(98,V,17,8,"div",31),t()(),e(99,"div",32)(100,"div",29)(101,"h3"),n(102,"Customer Insights"),t()(),e(103,"div",33)(104,"div",34)(105,"div",35),n(106,"\u{1F465}"),t(),e(107,"div",36)(108,"div",37),n(109),t(),e(110,"div",38),n(111,"Total Customers"),t()()(),e(112,"div",34)(113,"div",35),n(114,"\u{1F195}"),t(),e(115,"div",36)(116,"div",37),n(117),t(),e(118,"div",38),n(119,"New This Period"),t()()(),e(120,"div",34)(121,"div",35),n(122,"\u{1F504}"),t(),e(123,"div",36)(124,"div",37),n(125),t(),e(126,"div",38),n(127,"Returning"),t()()(),e(128,"div",34)(129,"div",35),n(130,"\u{1F4B0}"),t(),e(131,"div",36)(132,"div",37),n(133),m(134,"number"),t(),e(135,"div",38),n(136,"Avg. Order Value"),t()()()()(),e(137,"div",39)(138,"div",29)(139,"h3"),n(140,"Geographic Distribution"),t()(),e(141,"div",40),c(142,$,12,7,"div",41),t()()()),a&2&&(o(8),y("ngModel",r.selectedPeriod),o(19),s("\u20AB",g(28,19,r.totalRevenue)),o(3),s("+",r.revenueChange,"%"),o(8),d(g(39,21,r.totalOrders)),o(3),s("+",r.ordersChange,"%"),o(8),d(g(50,23,r.newCustomers)),o(3),s("+",r.customersChange,"%"),o(8),d(g(61,25,r.productsSold)),o(3),s("+",r.productsChange,"%"),o(12),p("ngForOf",r.revenueData),o(2),p("ngForOf",r.chartLabels),o(11),p("ngForOf",r.ordersData),o(2),p("ngForOf",r.chartLabels),o(8),p("ngForOf",r.topProducts),o(11),d(r.totalCustomers),o(8),d(r.newCustomers),o(8),d(r.returningCustomers),o(8),s("\u20AB",g(134,27,r.averageOrderValue)),o(9),p("ngForOf",r.topRegions))},dependencies:[E,S,R,k,I,A,w,D,M],styles:[".analytics-page[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0 0 8px}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.period-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;background:#fff;font-size:14px}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.metric-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000001a;display:flex;align-items:center;gap:16px}.metric-icon[_ngcontent-%COMP%]{font-size:2rem}.metric-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#64748b;margin:0 0 8px}.metric-value[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:#1e293b;margin:0 0 4px}.metric-change[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500}.metric-change.positive[_ngcontent-%COMP%]{color:#059669}.metric-change.negative[_ngcontent-%COMP%]{color:#dc2626}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:32px}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000001a}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0}.chart-legend[_ngcontent-%COMP%]{display:flex;gap:16px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.875rem;color:#64748b}.legend-color[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:2px}.chart-container[_ngcontent-%COMP%]{height:200px;display:flex;flex-direction:column;justify-content:space-between}.chart-bars[_ngcontent-%COMP%]{display:flex;align-items:end;gap:8px;height:150px}.bar[_ngcontent-%COMP%]{flex:1;background:linear-gradient(to top,#3b82f6,#60a5fa);border-radius:4px 4px 0 0;min-height:4px}.chart-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.875rem;color:#64748b}.top-products[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000001a;margin-bottom:32px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin:0}.products-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.product-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border:1px solid #f1f5f9;border-radius:8px}.product-rank[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:#f1f5f9;color:#64748b;display:flex;align-items:center;justify-content:center;font-weight:600}.product-info[_ngcontent-%COMP%]{flex:1}.product-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;margin-bottom:4px}.product-brand[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.product-metrics[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:end;gap:4px}.product-sales[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.product-revenue[_ngcontent-%COMP%]{font-weight:600;color:#059669}.product-chart[_ngcontent-%COMP%]{width:100px}.mini-chart[_ngcontent-%COMP%]{display:flex;align-items:end;gap:2px;height:40px}.mini-bar[_ngcontent-%COMP%]{flex:1;background:#e2e8f0;border-radius:1px;min-height:2px}.customer-analytics[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000001a;margin-bottom:32px}.customer-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:24px}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.geographic-analytics[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px #0000001a}.geo-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.geo-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border:1px solid #f1f5f9;border-radius:8px}.region-info[_ngcontent-%COMP%]{flex:1}.region-name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;margin-bottom:4px}.region-orders[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.region-revenue[_ngcontent-%COMP%]{font-weight:600;color:#059669;min-width:120px;text-align:right}.region-chart[_ngcontent-%COMP%]{width:100px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#f1f5f9;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:4px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid transparent;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s;text-decoration:none;display:inline-flex;align-items:center;gap:8px}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;border-color:#d1d5db;color:#374151}.btn-outline[_ngcontent-%COMP%]:hover{background-color:#f8fafc}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.charts-grid[_ngcontent-%COMP%], .metrics-grid[_ngcontent-%COMP%], .customer-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.product-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.product-metrics[_ngcontent-%COMP%]{align-items:flex-start}}"]})};export{T as AnalyticsComponent};
